<script src="/js/site.js"></script>
<!-- Add target/rel on external links -->
<script type="module">
import detectExternalLink from 'https://cdn.jsdelivr.net/npm/detect-external-link@2/+esm';
if (typeof detectExternalLink === 'function') {
  const selectLinks = document.querySelectorAll('.td-content a');
  selectLinks.forEach(element => {
    const linkHref = element.getAttribute('href');
    if (linkHref !== null) {
      const isExternal = detectExternalLink(linkHref, {
        'hosts': [
          'https://docs.yugabyte.com/'
        ]
      });
      if (isExternal) {
        if (!element.target) {
          element.target = '_blank';
          if (!element.rel) {
            element.rel = 'noopener';
          }
        }
      }
    }
  });
}
</script>

{{- with .Site.Params.algolia_docsearch -}}
  <script src="/js/search.js"></script>
{{- end -}}

<script>
  !function () {
    var t = window.driftt = window.drift = window.driftt || [];
    if (!t.init) {
      if (t.invoked) return void (window.console && console.error && console.error("Drift snippet included twice."));
      t.invoked = !0, t.methods = ["identify", "config", "track", "reset", "debug", "show", "ping", "page", "hide", "off", "on"],
        t.factory = function (e) {
          return function () {
            var n = Array.prototype.slice.call(arguments);
            return n.unshift(e), t.push(n), t;
          };
        }, t.methods.forEach(function (e) {
          t[e] = t.factory(e);
        }), t.load = function (t) {
          var e = 3e5, n = Math.ceil(new Date() / e) * e, o = document.createElement("script");
          o.type = "text/javascript", o.async = !0, o.crossorigin = "anonymous", o.src = "https://js.driftt.com/include/" + n + "/" + t + ".js";
          var i = document.getElementsByTagName("script")[0];
          i.parentNode.insertBefore(o, i);
        };
    }
  }();

  drift.SNIPPET_VERSION = '0.3.1';
  drift.load('9fp5c8x3476g');
</script>

{{- if .Site.Params.kapa_ai -}}
{{- $questions := `
  How do I create an index?,
  Follower Reads vs Read Replicas?,
  What are transaction isolation levels?,
  What does Voyager do?
` -}}
{{- $questions := replaceRE " +" " " (trim (replaceRE "\n\t\r" " " $questions) " \n\t\r") -}}
<script defer src="https://widget.kapa.ai/kapa-widget.bundle.js" 
    data-button-bg-color="#FFFFFF" 
    data-button-border-radius="8px" 
    data-button-border="1px solid #D7DEE4" 
    data-button-box-shadow="0px 2px 40px 0px rgba(37, 50, 61, 0.15)" 
    data-button-height="94px" 
    data-button-text-color="#4E5F6D" 
    data-button-text-font-size="21px" 
    data-button-text-shadow="none" 
    data-button-width="97px" 
    data-font-family="Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;" 
    data-modal-disclaimer="This is a custom LLM for Yugabyte with access to developer docs (docs.yugabyte.com), and all GitHub issues from the past year (github.com/yugabyte/yugabyte-db/issues). Please note that answers are generated by AI and may not be fully accurate." 
    data-modal-example-questions="{{- $questions -}}"
    data-project-color="#5D5FeF" 
    data-project-logo="/icons/yugabyte.svg" 
    data-project-name="Yugabyte" 
    data-search-mode-enabled="true" 
    data-search-result-primary-text-color="#0B1117" 
    data-switch-color="#4E5F6D"
    data-website-id="7669d105-58f8-41b7-b3f1-4799ac938657"
    data-search-include-source-names='["Documentation"]'
></script>
<script>
  (function() {
    window.addEventListener('load', function () {
      const askAiTopSpan = document.querySelector('.ask-ai-top > span');
      const kapaWidgetButton = document.querySelector('#kapa-widget-container > button');
      if ( askAiTopSpan && kapaWidgetButton ) {
        askAiTopSpan.addEventListener('click', function () {
          kapaWidgetButton.click();
        });
      }
    });
  })();
</script>
{{- end -}}
