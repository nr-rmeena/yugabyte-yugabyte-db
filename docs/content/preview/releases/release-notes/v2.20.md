---
title: What's new in the YugabyteDB v2.20 LTS release series
headerTitle: What's new in the YugabyteDB v2.20 LTS release series
linkTitle: v2.20 series (LTS)
description: Enhancements, changes, and resolved issues in the YugabyteDB v2.20 LTS release series recommended for production deployments.
aliases:
 - /preview/releases/release-notes/stable-release/
 - /preview/releases/whats-new/stable-release/
menu:
 preview_releases:
   identifier: v2.20
   parent: release-notes
   weight: 2815
rightNav:
 hideH4: true
type: docs
---

{{< tip title="YugabyteDB Anywhere release notes" >}}
The [release notes for YugabyteDB Anywhere](../../yba-releases/) are on [their own page](../../yba-releases/v2.20/).
{{< /tip >}}

{{< tip title="LTS - Feature availability" >}}
All features in stable releases are considered to be {{<badge/ga>}} unless marked otherwise.
{{< /tip >}}

What follows are the release notes for the YugabyteDB v2.20 release series. Content will be added as new notable features and changes are available in the patch releases of the YugabyteDB v2.20 release series.

For an RSS feed of all release series, point your feed reader to the [RSS feed for releases](../../index.xml).

## v2.20.0.0 - November 13, 2023 {#v2.20.0.0}

**Build:** `2.20.0.0-b76`

**Third-party licenses:** [YugabyteDB](https://downloads.yugabyte.com/releases/2.20.0.0/yugabytedb-2.20.0.0-b76-third-party-licenses.html), [YugabyteDB Anywhere](https://downloads.yugabyte.com/releases/2.20.0.0/yugabytedb-anywhere-2.20.0.0-b76-third-party-licenses.html)

### Downloads

<ul class="nav yb-pills">
 <li>
   <a href="https://downloads.yugabyte.com/releases/2.20.0.0/yugabyte-2.20.0.0-b76-darwin-x86_64.tar.gz">
     <i class="fa-brands fa-apple"></i>
     <span>macOS</span>
   </a>
 </li>
 <li>
   <a href="https://downloads.yugabyte.com/releases/2.20.0.0/yugabyte-2.20.0.0-b76-linux-x86_64.tar.gz">
     <i class="fa-brands fa-linux"></i>
     <span>Linux x86</span>
   </a>
 </li>
 <li>
   <a href="https://downloads.yugabyte.com/releases/2.20.0.0/yugabyte-2.20.0.0-b76-el8-aarch64.tar.gz">
     <i class="fa-brands fa-linux"></i>
     <span>Linux ARM</span>
   </a>
 </li>
</ul>

### Docker

```sh
docker pull yugabytedb/yugabyte:2.20.0.0-b76
```

### Highlights

* Support for OIDC token-based authentication via Azure AD. This allows YSQL database users to sign in to YugabyteDB universes using their JSON Web Token (JWT) as their password.
* Support for Transactional CDC.
* Wait-on conflict concurrency control with pg_locks. This feature is especially important to users that have workloads with many multi-tablet statements, which may have multiple sessions contending for the same locks concurrently. Wait-on conflict concurrency control helps avoid a deadlock scenario as well as ensure fairness so a session is not starved by new sessions. {{<badge/ea>}}
* Catalog metadata caching to improve YSQL connection scalability and performance with faster warm up times. {{<badge/ea>}}
* Support for ALTER COLUMN TYPE with on-disk changes is now {{<badge/ga>}} for production deployments. This feature expands ALTER TABLE capabilities with a broader range of data type modifications, including changes to the type itself, not just size increments.

### YSQL

#### Improvement

* Eases diagnosing transaction issues by generating a detailed error message in case of detected deadlocks, while offering more dependable error handling for aborted transactions in uncertain race situations. {{<issue 18384>}},{{<issue 14114>}}
* Resolves an issue where pg_stat_activity was taking an exclusive lock on t-server sessions, causing deadlocks on active sessions and hindering operations like long running DML and WaitForBackendsCatalogVersion flow. {{<issue 18711>}}
* Enhances the resilience of the PgIndexBackfillTest.NoAbortTxn test by explicitly setting the flag 'ysql_yb_disable_wait_for_backends_catalog_version', instead of relying on default settings. {{<issue 19351>}}
* Enhances the resiliency of test PgIndexBackfillTest.NoAbortTxn and other tests against changes in YSQL backends manager flags' default values. {{<issue 19351>}}
* Fixes a bug in the handling of semi/anti join factors in inner unique joins, resulting in a more accurate database query costing and performance estimation. {{<issue 19021>}}
* Changes set `yb_bnl_batch_size` to 1024 by default and `yb_prefer_bnl` to true, making batch nested loop joins more available and cost-efficient without altering other join plans. {{<issue 19273>}}
* Adjusts the default unit for yb_fetch_size_limit to bytes from kilobytes, enabling accurate size limits, preventing unwanted disabling of the limit, and improving the speed of queries. {{<issue 18522>}}
* Fixes the handling of RowCompareExpression bindings to prevent crashes and incorrect results by accurately setting DocKey bounds and rechecking all_ordinary_keys_bound. {{<issue 19384>}}
* Introduces a check to ensure synchronization between the Postgres catalog and DocDB schema during backup, enhancing data integrity even if DDL operations occur during the backup. {{<issue 13358>}}
* Allows better control of single-row and non-transactional operations by decoupling 'is_single_row_txn' and 'is_non_transactional', enhancing precision when using yb_disable_transactional_writes. {{<issue 4906>}}

#### Bugs

* Corrects an issue with tuple IN filters not binding to requests, enhancing the accuracy of row filtering in distributed database queries. {{<issue 19308>}}
* Allows altering data types on temporary tables without blocking the PostgreSQL table rewrite code-paths, enabling the creation of a new relation and data insertion. {{<issue 18909>}}
* Simplifies table rewrite for foreign keys by facilitating simultaneous drop of all keys, preventing issues such as 'cache lookup failed for 16398' errors. {{<issue 19063>}}
* Corrects issues with ALTER TYPE operations that may have caused null violations or failed on tables with a range key, enhancing stability and accuracy of schema changes. {{<issue 18911>}},{{<issue 19382>}}
* Disables the Buffer Nested Loop (BNL) by default on 2.20 to mitigate potential irregularities caused by previous changes. {{<issue 19614>}}
* Ensures proper cleanup of tables in PREPARING state following a failed CREATE TABLE operation, fixes multi-rewrite ALTER TABLE ALTER COLUMN TYPE failures, corrects the lookup of Materialized views in PG schema from DocDB, and acknowledges that DocDB columns may not always be sorted by "order" field when the primary key contains differently ordered columns. {{<issue 19605>}}
* Rectifies a sequencing issue with single shard INSERT operations that caused unexpected duplications; the change ensures the read time is only selected after conflicts are resolved, aligning with how the UPDATE and DELETE operations function, improving data consistency. {{<issue 19407>}}
* Reduces the latency on queries with large 'IN' clause by transitioning from index-based to iterator-based operand read in 'IN' clause processing, enhancing performance for better preparation of read requests. {{<issue 19329>}}

### DocDB

#### New Features

* Allows for rollback of a database upgrade if not satisfied with the new version, through a phased approach that includes promotion and demotion of specific AutoFlags. {{<issue 13686>}}

#### Improvement

* Introduces an 'xCluster' t-server user interface page for live tracking of xCluster source streams and target pollers' statuses. {{<issue 19203>}}
* Allows tracking of active WriteQuery objects and the status of rpc requests through a newly added metric for easier debugging. {{<issue 18940>}}
* Enhances precision in data transfer rates by switching from MiBps to KiBps in the tserver user interface pages, improving the accuracy of rate readings for each tablet. {{<issue 19203>}}
* Upgrades TCMalloc heap snapshot to deliver more accurate estimates of memory allocation and accounting, enhancing clarity for system memory usage assessments. {{<issue 19071>}}
* Simplifies xCluster operations by updating apply safe time more frequently when no transactions are active, reducing the minimum safe time lag. {{<issue 19274>}}
* Prevents tablet servers from registering with masters in different universes to safeguard against data loss scenarios, by introducing a new `universe_uuid` field for clearer cluster identification in the configuration. This update, which involves changes in the heartbeat logic, is controlled by the `master_enable_universe_uuid_heartbeat_check` autoflag. {{<issue 17904>}}
* Enhances YCQL index scan timeout handling for improved efficiency and minimal log errors. Now, attempts to create and send GetTableLocations RPCs cease earlier if the deadline is reached. {{<issue 19221>}}
* Eliminates potential tablet shutdown issues by clearing wait-queue entries during the shutdown process and checking if the ResumedWaiterRunner shut down before adding new waiters to the queue. {{<issue 19272>}}
* Renames certain elements, moves some functions for better organization, introduces a new dedicated class for the management of XCluster configurations, and classifies 'allow_ycql_transactional_xcluster' as a testing-specific flag. {{<issue 19353>}}
* Introduces XClusterManager to streamline XCluster control logic, delivers cleaner code by delegating functions from CatalogManager, and enhances testing efficiency by making 'allow_ycql_transactional_xcluster' a test flag. {{<issue 19353>}}
* Minimizes deadlock occurrences by modifying the query layer request logic to resume waiters in order based on the xactStartTimestamp across all tablets, improving fairness in read committed isolation. {{<issue 18055>}}
* Allows batching updates for rocksdb and tablet-level event stats metrics which are now visible in 'EXPLAIN' queries and tracing, enhancing tracking and debugging. {{<issue 16785>}}
* Allows tracing of UpdateConsensus API calls, offering diagnostic insights when the respective flag is enabled. {{<issue 19417>}}
* Rejects ChangeConfig requests for system catalog when a server is in the middle of a change, preventing potential data loss scenarios. {{<issue 18335>}}
* Enables control over table creation based on available cluster resources, introducing tablet_replicas_per_gib_limit, tablet_replicas_per_core_limit, and tablet_overhead_size_percentage flags. {{<issue 16177>}}
* Adapts appropriate tracing for correct per-session functioning, preventing premature trace releasing in pg_client_session and ensuring inclusion of Callback response propagated Rpc's. {{<issue 19099>}}
* Enables easy calculation of the ratio of tablet peers to cores and tablet peers to memory on YBM clusters by adding a metric for the number of running tablet peers on a tserver. {{<issue 9647>}}
* Simplifies readability of long trace logs by splitting the output, ensuring no truncation beyond the Glog's 30k limit, with adaptations to limit each line below 30k. Introduces `trace_max_dump_size` flag, adjustable for larger traces. {{<issue 19532>}}
* Offers a fix to ensure retryable requests mem-tracker metric shows up on Prometheus at the tablet level, enhancing database statistics accuracy. {{<issue 19301>}}
* Allows setting limits on the number of tablet replicas based on available system resources by switching 'tablet_replicas_per_core_limit' and 'tablet_replicas_per_gib_limit' from test flags to runtime flags. {{<issue 16177>}}

#### Bugs

* Adjusts the calculation of lag metrics for split tablet children not yet polled for, ensuring accurate tablet hierarchy metrics by using the parent tablet's last sent/committed record time. {{<issue 17025>}}
* Corrects a bug causing invalid filter key usage during backwards scans, ensuring appropriate use of bloom filter-based file filters and hence enhancing scan efficiency. {{<issue 19440>}}
* Ensures seamless tablet splitting by setting accurate operator IDs (opid) for split children, preventing log polling from the start, and avoiding excessive write-ahead logging (WAL) load on consumers. {{<issue 18540>}}
* Allows effective error handling during a rare incidence of a parent tablet shutdown occurring simultaneously with a Pgsql operation, reducing the risk of non-retriable errors. {{<issue 19033>}}
* Corrects an error that resulted in improperly packing rows without a liveness column, preventing failed system catalog loads and enhancing data handling. {{<issue 18157>}}
* Prevents a stale partition map issue in the meta cache layer by only updating data from the LookupByIdRpc class when the received location info doesn't contain any split child ids, thus enhancing data consistency and reliability. {{<issue 18732>}}
* Ensures trace collection for outgoing calls happens only when tied to an inbound trace, preventing unnecessary memory usage and excessive logging. {{<issue 19497>}}
* Restores the original behavior of not including tablets on dead tservers in the replica count for improved accuracy in data handling. {{<issue 19514>}}
* Reduces frequency of 40001 errors in highly concurrent workloads with read committed isolation by updating tablet states only if they process a write. {{<issue 18081>}},{{<issue 19535>}}
* Corrects an issue where replaying an alter schema during local bootstrap fails and avoids potential crashes by adding a missing call to 'Prepare' in 'PlayChangeMetadataRequest'. {{<issue 19546>}}
* Prevents premature garbage collection of schema packings in XCluster configurations to ensure data consistency despite network partitions or delayed row writings. {{<issue 17229>}}
* Reduces index size growth and enhances query speeds by addressing an issue where Hash and Range indexes continue to expand even after row deletion. {{<issue 19544>}}

### CDC

#### New Features

* Alters default stream creation to utilize 'EXPLICIT' type increasing compatibility and eliminating any concerns about upgrade or rollback problems. {{<issue 18748>}}

#### Improvement

* Populates 'snapshot_key' in 'GetCheckpointResponse' only when it is present, ensuring 'snapshot_key' reflects accurate information rather than default empty value. {{<issue 19292>}}
* Allows customizing maximum retry attempts for RPCs in AsyncClient, eliminating the 'Too many attempts' exception within a short timeframe. {{<issue 12751>}}
* Allows disabling tablet splitting on tables that are part of a CDCSDK stream using a new GFlag, enhancing control over database organization. {{<issue 19482>}}

#### Bugs

* Removes only inactive tablets from cdc_state, including protecting parent split tablets from being dropped, enhancing stream stability. {{<issue 19348>}}
* Solves the Write Ahead Log (WAL) garbage collection issues for tables created after establishing a stream by triggering an ALTER TABLE request to enable WAL retention for each tablet of the table. {{<issue 19385>}}
* Enables correct snapshot key parameter from 'explicit_cdc_sdk_opid' in explicit mode, enhancing data consistency during snapshots. {{<issue 19394>}}
* Now sets keys in the `GetChangesRequest` only when they are not null, addressing previous issues with snapshots resuming via the CDCSDK. {{<issue 19394>}}
* Allows uninterrupted fetching of tablets despite individual table errors, with warnings logged instead of terminating the process. {{<issue 19434>}}

### yugabyted

#### Improvement

* Corrects misleading visual display in the user interface that represented password authentication as enabled when it actually wasn't. {{<issue 19295>}}
* Displays an accurate number of CPUs on the overview page and ensures all live queries, not just those with idle status, are visible. {{<issue 19414>}}
* Corrects joining and start command issues related to inactive master node IPs and enhances error handling for placement_uuid retrieval from the provided join IP. {{<issue 19316>}},{{<issue 19314>}}