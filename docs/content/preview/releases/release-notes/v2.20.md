---
title: What's new in the YugabyteDB v2.20 LTS release series
headerTitle: What's new in the YugabyteDB v2.20 LTS release series
linkTitle: v2.20 series (LTS)
description: Enhancements, changes, and resolved issues in the YugabyteDB v2.20 LTS release series recommended for production deployments.
aliases:
 - /preview/releases/release-notes/stable-release/
 - /preview/releases/whats-new/stable-release/
menu:
 preview_releases:
   identifier: v2.20
   parent: release-notes
   weight: 2815
rightNav:
 hideH4: true
type: docs
---

{{< tip title="YugabyteDB Anywhere release notes" >}}
The [release notes for YugabyteDB Anywhere](../../yba-releases/) are on [their own page](../../yba-releases/v2.20/).
{{< /tip >}}

{{< tip title="LTS - Feature availability" >}}
All features in stable releases are considered to be {{<badge/ga>}} unless marked otherwise.
{{< /tip >}}

What follows are the release notes for the YugabyteDB v2.20 release series. Content will be added as new notable features and changes are available in the patch releases of the YugabyteDB v2.20 release series.

For an RSS feed of all release series, point your feed reader to the [RSS feed for releases](../../index.xml).

## v2.20.0.0 - November 13, 2023 {#v2.20.0.0}

**Build:** `2.20.0.0-b76`

**Third-party licenses:** [YugabyteDB](https://downloads.yugabyte.com/releases/2.20.0.0/yugabytedb-2.20.0.0-b76-third-party-licenses.html), [YugabyteDB Anywhere](https://downloads.yugabyte.com/releases/2.20.0.0/yugabytedb-anywhere-2.20.0.0-b76-third-party-licenses.html)

### Downloads

<ul class="nav yb-pills">
 <li>
   <a href="https://downloads.yugabyte.com/releases/2.20.0.0/yugabyte-2.20.0.0-b76-darwin-x86_64.tar.gz">
     <i class="fa-brands fa-apple"></i>
     <span>macOS</span>
   </a>
 </li>
 <li>
   <a href="https://downloads.yugabyte.com/releases/2.20.0.0/yugabyte-2.20.0.0-b76-linux-x86_64.tar.gz">
     <i class="fa-brands fa-linux"></i>
     <span>Linux x86</span>
   </a>
 </li>
 <li>
   <a href="https://downloads.yugabyte.com/releases/2.20.0.0/yugabyte-2.20.0.0-b76-el8-aarch64.tar.gz">
     <i class="fa-brands fa-linux"></i>
     <span>Linux ARM</span>
   </a>
 </li>
</ul>

### Docker

```sh
docker pull yugabytedb/yugabyte:2.20.0.0-b76
```

### Highlights

* Support for OIDC token-based authentication via Azure AD. This allows YSQL database users to sign in to YugabyteDB universes using their JSON Web Token (JWT) as their password.
* Support for Transactional CDC.
* Wait-on conflict concurrency control with pg_locks. This feature is especially important to users that have workloads with many multi-tablet statements, which may have multiple sessions contending for the same locks concurrently. Wait-on conflict concurrency control helps avoid a deadlock scenario as well as ensure fairness so a session is not starved by new sessions. {{<badge/ea>}}
* Catalog metadata caching to improve YSQL connection scalability and performance with faster warm up times. {{<badge/ea>}}
* Support for ALTER COLUMN TYPE with on-disk changes is now {{<badge/ga>}} for production deployments. This feature expands ALTER TABLE capabilities with a broader range of data type modifications, including changes to the type itself, not just size increments.

### New Features


#### DocDB

* YugabyteDB now supports rollback of an upgrade, allowing users to revert to a previous version if needed.  {{<issue 13686>}}

#### CDC

* Change default type to EXPLICIT while creating a stream, ensuring upgrade/rollback safety. {{<issue 18748>}}

### Improvement


#### YSQL

* This change improves the error message when transactions are aborted due to deadlocks, by reporting detailed deadlock-specific errors and ensuring proper handling of deadlock retries. {{<issue 18384>}},{{<issue 14114>}}
* Fix Pg_stat_activity issue by creating a cache to store active sessions and their transactions, eliminating exclusive locks. {{<issue 18711>}}
* Fix bug in of semi/anti join factors during inner unique joins in Postgres 14.9, causing incorrect join cost estimations. {{<issue 19021>}}
* Enable BNL by default with a batch size of 1024, and ensure it replaces nested loop joins effectively. {{<issue 19273>}}
* Change default unit for yb_fetch_size_limit to bytes from kilobytes, allowing non-integer kilobyte values. {{<issue 18522>}}
* Fix the handling of RowCompareExpression bindings to prevent wrong query results and process crashes. This ensures proper binding for range key columns. {{<issue 19384>}}
* Fix handling of YB-Backup during ongoing DDLs to avoid mismatched snapshots due to DocDB schema changes.  {{<issue 13358>}}
* Uncouple variables for non-transactional writes, ensuring single-row transactions indicate non-writes accurately, improving backfill functionality. {{<issue 4906>}}

#### DocDB

* Adds a tserver UI page to track live status of xCluster source streams and target pollers, useful for managing large amounts of data. {{<issue 19203>}}
* Expose a metric to track active WriteQuery objects in tablets, aiding debugging. Add a counter to monitor status RPC requests in the tablet UI, helping identify and confirm object leaks. {{<issue 18940>}}
* Switch tserver UI pages data transfer rate from MiBps to KiBps for better precision in tracking live status of xCluster source streams and target pollers. {{<issue 19203>}}
* Add columns for estimated number of bytes and samples from call stack to pprof memory pages, enabling direct comparison with system memory usage and accurate measurement of memory allocation. {{<issue 19071>}}
* Update xCluster to send apply safe time more frequently when there is no active, reducing the safe time lag. {{<issue 19274>}}
* Update prevents tserver from registering with a master leader in a different universe, avoiding data loss {{<issue 17904>}}
* Improved timeout handling for YCQL index scan to avoid log spew and ensure timely responses for users. Fixes log spew and avoids RPC timeouts. {{<issue 19221>}}
* During wait-queue shutdown, the records in pq_ weren't cleared, risking tablet shutdown. This issue is fixed by clearing records during shutdown and ensuring ResumedWaiterRunner is shut down before inserting new waiters. {{<issue 19272>}}
* The query layer request logic now includes xactStartTimestamp in all Read/WriteRequest RPCs, ensuring waiters are resumed in order across tablets, reducing deadlocks and improving fairness in read committed isolation. {{<issue 18055>}}
* Add support for batching updates for rocksdb and tablet-level event stats metrics. Separates handling of counter and gauge metrics.  {{<issue 16785>}}
* Support tracing UpdateConsensus api by enabling a flag to collect traces for UpdateConsensus from remote followers and adding a trace message when appended to the local log. {{<issue 19417>}}
* Reject `ConfigChange` requests for sys catalog during ongoing config change to prevent possible data loss scenarios.  {{<issue 18335>}}
* Reject create table requests if the number of tablet replicas would exceed cluster capabilities. {{<issue 16177>}}
* Fix trace adoption issues to ensure correct per-session tracing and proper handling of traces in callbacks. {{<issue 19099>}}
* Add metric for the number of running tablet peers on a tserver to easily compute the ratio of tablet peers to cores and memory on clusters. {{<issue 9647>}}
* Allow long traces to be printed over multiple lines with a limit using Gflag `trace_max_dump_size`, avoiding truncation. {{<issue 19532>}}
* Fixing an issue where the retryable requests metric was not showing in Prometheus, ensuring it's included at the table-level for better monitoring. {{<issue 19301>}}
* Switches tablet limit GFlags from test flags to runtime flags, adding limits for tablet count based on available resources. {{<issue 16177>}}

#### CDC

* Ensure `snapshot_key` is only populated if present in `GetCheckpointResponse`, avoiding empty defaults. Changes the `SetCDCCheckpoint` flow for better handling of snapshot mode scenarios. {{<issue 19292>}}
* Adjust maxAttempts and sleepTime for retrying RPCs in CDCSDK AsyncClient to prevent 'Too many attempts' exception. {{<issue 12751>}}
* Add a GFlag `enable_tablet_split_of_cdcsdk_streamed_tables` to disable automatic tablet splitting for tables in CDCSDK streams, similar to the functionality for xCluster. {{<issue 19482>}}

#### yugabyted

* Fix issue where password is mistakenly shown as enabled in the UI even when it's not turned on, now reflecting the correct status. {{<issue 19295>}}
* Fixes incorrect vCPU count and live queries display issues in the YugabyteDB UI. {{<issue 19414>}}
* Fixes issues related to the `--join` flag by preventing start command failures and handling placement UUID, enabling node joins. {{<issue 19316>}},{{<issue 19314>}}

### Bugs


#### YSQL

* Fix bug where tuple IN filters were not bound to the request, leading to rows being filtered in BNL queries. {{<issue 19308>}}
* Fix for ALTER TYPE on temporary tables now executes PG code paths, resolving data corruption. {{<issue 18909>}}
* Fixes error when dropping and re-creating foreign keys in a table through a table's foreign key. This ensures successful table rewrites. {{<issue 19063>}}
* This fix resolves ALTER TYPE issues including null violation and failure for range key tables, ensuring data consistency and preventing errors. {{<issue 18911>}},{{<issue 19382>}}
* Revert the default BNL setting to off on 2.20, as some rare cases may be affected by the prior change {{<issue 19614>}}
* Fixes issues related to DDL Atomicity including cleanup for failed table creation, handling of ALTER COLUMN TYPE, and lookup for Materialized views. {{<issue 19605>}}
* Single shard INSERTs will now pick a read time on docdb after conflict, ensuring no missed data due to earlier read times.  {{<issue 19407>}}
* Avoid O(n^2) traversal while generating ybctids for large IN operator queries to reduce time spent on preparing read requests. {{<issue 19329>}}

#### DocDB

* Fix lag metrics calculation for split tablet children to ensure accurate metrics and prevent lag from getting "stuck" due to missed data. {{<issue 17025>}}
* Fix bug where invalid filter key caused potential bloom filter-based file filter to not work properly in backwards scans, hurting scan. {{<issue 19440>}}
* Fix setting opid in cdc_state for split children to resolve massive WAL on the consumer during very splits. {{<issue 18540>}}
* A Pgsql operation, triggered during parent tablet shutting down may be not retried, leading to errors. The fix ensures handling of tablet shutting down status to prevent such errors. {{<issue 19033>}}
* The change prevents incorrect generation of packed rows without liveness column, resolving upgrade failure and sys catalog corruption issues.  {{<issue 18157>}}
* Prevent meta cache from getting stale by updating the cache only if received location info doesn't have split child ids. {{<issue 18732>}}
* Change made to only request outgoing traces if there is a parent trace, reducing memory usage and excessive logging. It prevents memory bloat caused by a large number of processed requests and improves trace usefulness. {{<issue 19497>}}
* Ensure tablets on dead tservers are not counted towards the replica count in under tablets endpoint, restoring original behavior. Fixes issue with reporting tablets on dead tservers under tablets after master leader failover. {{<issue 19514>}}
* Fixes issues with transaction promotion, ensuring promotion requests are sent only to relevant tablets and avoiding erroneous errors. {{<issue 18081>}},{{<issue 19535>}}
* Added missing call to Prepare in PlayChangeMetadataRequest to ensure proper handling of replaying alter schema during local bootstrap. {{<issue 19546>}}
* Prevent GC of schema packings in XCluster config to ensure correct handling of schema versions before any rows are received. {{<issue 17229>}}
* Fix issue causing index size growth and slower queries due to incomplete build state between TServer and Master process.  {{<issue 19544>}}

#### CDC

* Only remove removed tablets from cdc_state during CleanUpCDCStreamsMetadata to ensure only active tablets are deleted. This also includes not dropping parent split tablets {{<issue 19348>}}
* Fixes the WAL GC issue for tables added after stream creation, ensuring WAL retention is enabled for relevant tables. {{<issue 19385>}}
* Set correct snapshot key parameter, ensuring it's assigned and used appropriately, and fix snapshot resume logic. {{<issue 19394>}}
* Change the logic to set key only if not null for GetChangesRequest. Fixes snapshot resume issue. {{<issue 19394>}}
* Don't fail while fetching tablets for a table if one hits error, to allow flow to continue fetching tablets for other tables. {{<issue 19434>}}